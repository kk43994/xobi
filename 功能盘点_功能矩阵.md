# 功能盘点 - 功能矩阵（功能 × 系统 × 复用建议）

> 说明：✅=已实现且可用；🟡=部分实现/体验不完整；—=未实现/不适用  
> 系统：A=`xobixiangqing`（React+Flask），B=`tupian-de-tu`（FastAPI+静态 AntDX），C=`自己版本`（FastAPI 分支）

| 功能域 | 具体功能 | A | B | C | 建议主实现/复用点 |
|---|---|---:|---:|---:|---|
| 项目化工作流 | Project 创建/查询/更新/删除 | ✅ | — | — | A 作为“主线项目中心” |
| 项目化工作流 | 大纲生成/编辑/拖拽排序 | ✅ | — | — | A（前端成熟） |
| 项目化工作流 | 描述生成（批量/单页）+ 编辑 | ✅ | — | — | A |
| 项目化工作流 | 生图（批量/单页） | ✅ | 🟡（更多偏单图/替换/风格） | 🟡 | A 做“项目页生图”；B 做“工厂能力” |
| 项目化工作流 | 自然语言改图（单页）+ 上下文图 | ✅ | 🟡（更多是参数化生成/预览） | 🟡 | A 的“改图”体验可做平台统一入口 |
| 版本/回滚 | 单页图片版本历史/切换当前 | ✅ | — | — | A 的 PageImageVersion 很关键（建议平台统一） |
| 模板 | 项目模板图上传/删除 | ✅ | — | — | A |
| 模板 | 用户模板库（上传/列表/删除） | ✅ | — | — | A；B 可补“风格参考图/模板”选择接入 |
| 模板 | 系统模板（预置） | 🟡（placeholder） | — | — | 平台后续补齐（A 的接口已预留） |
| 素材/资源 | 全局素材上传/列表/删除 | ✅ | 🟡（主要在工具目录落盘） | 🟡 | 建议统一到 A 的 Material/Asset 模型 |
| 素材/资源 | 项目素材（绑定项目） | ✅ | 🟡 | 🟡 | A |
| 素材/资源 | 素材生成（prompt 生图） | ✅ | 🟡（可通过 style/text 或 replace/generate 实现） | 🟡 | A 做“素材生成”入口，底层可调用 B 的能力 |
| 素材/资源 | 产品替换（素材模式） | ✅ | ✅（Replace 单图） | ✅（Replace 单图） | 统一成同一类 Job：A 负责落库与版本，B 提供替换引擎 |
| 参考文件 | 上传/解析状态机 | ✅ | — | — | A 独有长板 |
| 参考文件 | MinerU 解析（PDF/Office→Markdown） | ✅ | — | — | A 独有长板 |
| 参考文件 | 表格解析为 Markdown（xlsx/xls/csv） | ✅（作为参考文件） | ✅（作为 Excel 任务） | ✅ | 两者用途不同：A=参考资料；B=批处理输入 |
| Excel 工作台 | 上传/列预览 | — | ✅ | ✅ | 以 B 为主（excel_import.py 更完整） |
| Excel 工作台 | 字段映射解析（通用） | — | ✅ | ✅ | B |
| Excel 工作台 | 字段映射解析（批量替换专用 parse-replace） | — | ✅ | ✅ | B（后端有专门 schema） |
| Excel 工作台 | 表格 UI（table/gallery/search/filter/persist） | — | ✅ | 🟡 | B（batch-import-v2.js 最完整） |
| Excel 工作台 | 导出（overwrite/append，csv/xlsx） | — | ✅ | ✅ | B（overwrite 逻辑较成熟） |
| Excel 工作台（统一门户） | Dataset（导入/列表/行级结果/任务追踪） | ✅ | — | — | 以 A 的 Dataset/Job/Asset 为主（门口统一入口） |
| Excel 工作台（统一门户） | 上架导出 Excel（`taiyang.xlsx` v1） | ✅ | 🟡 | 🟡 | A：`/api/datasets/:id/export-excel`（导出文件入 Asset；B/C 作为历史参考） |
| Excel → Project | 行级生成/绑定 Project（仅绑定，不自动出多图） | 🟡 | — | — | 已能从 Excel 行一键生成/打开 Project；“批量生成详情页多图”后期再做 |
| Excel → Project | 批量生成详情页多图（N 行 → N Project → 多图产出） | — | — | — | 待开发（后期） |
| 标题仿写 | 单条改写 | — | ✅ | ✅ | B（`/api/title/rewrite`） |
| 标题仿写 | 批量改写 | — | ✅ | ✅ | B（`/api/title/batch-rewrite`） |
| 图片代理 | 外链图片代理（绕防盗链） | — | ✅ | ✅ | B（`/api/proxy-image`） |
| 平台规格 | 平台列表与规格查询 | — | ✅ | ✅ | B（`/api/platforms/*`） |
| 单图工厂 | 单图替换（product+reference） | 🟡（素材模式） | ✅ | ✅ | B 的 Replace 能力最完整（含 analyze/preview） |
| 单图工厂 | 仅分析（不生成） | — | ✅ | ✅ | B |
| 单图工厂 | 低清预览（512 preview） | — | ✅ | ✅ | B |
| 批量替换 | Excel 创建任务/进度/下载 | — | ✅ | ✅ | B（注意：/api/batch 与 /api/replace/batch 需收敛） |
| Studio | 生成计划（3方向） | — | ✅ | — | B 独有（建议接入到统一门户） |
| 风格化 | 单次风格生图（有产品图） | — | ✅ | — | B 独有 |
| 风格化 | 文生图（无产品图） | — | ✅ | — | B 独有 |
| 风格化 | 风格批量（create/list/status/cancel/download） | — | ✅ | — | B 独有 |
| 视觉标注 | analyze（坐标+建议） | — | ✅ | ✅ | B（C 也有但版本略旧） |
| 视觉标注 | describe（用于 prompt 的描述） | — | ✅ | ✅ | B |
| 手动编辑 | crop/resize/rotate/adjust/filter/add-text/batch-edit | — | ✅ | ✅ | B（作为公共后处理服务） |
| Agent | chat（按钮式建议+prompt） | — | ✅ | ✅ | B（Smart-chat/Chat 两套需统一定位） |
| Agent | expand-prompt（一句话扩写） | — | ✅ | ✅ | B |
| 设置 | 持久化设置（DB） | ✅ | — | — | A 做“全局/项目级设置中心” |
| 设置 | 请求头 runtime_config（临时配置） | — | ✅ | ✅ | 可作为“高级/临时调试模式”保留，但要纳入权限 |
| 导出 | 项目图片 ZIP 导出（JPG） | ✅ | ✅（batch zip） | ✅ | 统一到“Asset/Job”后导出更一致 |

---

## 结论（用于页面规划的关键点）
- **A 负责“项目与数据底座”**（Project/Asset/Job/Version/ReferenceFile/Settings）  
- **B 负责“工具箱能力”**（Replace/Studio/Style/Vision/Editor/Excel/Proxy/Title Rewrite）  
- C 以参考为主，整合时尽量不要作为“主实现源”，避免三套并行继续扩大。
