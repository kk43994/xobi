# ==============================================================================
# xobi Backend Environment Configuration
# ==============================================================================
# Copy this file to .env and fill in your values

# ------------------------------------------------------------------------------
# Flask Configuration
# ------------------------------------------------------------------------------
FLASK_ENV=development
SECRET_KEY=your-secret-key-here

# ------------------------------------------------------------------------------
# Database Configuration
# ------------------------------------------------------------------------------
# Option 1: SQLite (default, local development)
# DATABASE_URL=sqlite:///instance/database.db

# Option 2: PostgreSQL (Supabase, recommended for production)
# Format: postgresql://user:password@host:port/database
# DATABASE_URL=postgresql://postgres:[YOUR-PASSWORD]@db.[YOUR-PROJECT-REF].supabase.co:5432/postgres

# ------------------------------------------------------------------------------
# Cloudflare R2 Object Storage (Optional)
# ------------------------------------------------------------------------------
# Enable R2 for cloud file storage (recommended for production)
R2_ENABLED=false

# R2 Account and Credentials (from Cloudflare dashboard)
R2_ACCOUNT_ID=
R2_ACCESS_KEY_ID=
R2_SECRET_ACCESS_KEY=

# R2 Bucket Configuration
R2_BUCKET_NAME=xobi-files

# Public URL for R2 bucket (if using custom domain)
# Example: https://files.yourdomain.com
R2_PUBLIC_URL=

# ------------------------------------------------------------------------------
# AI Provider Configuration
# ------------------------------------------------------------------------------
# Provider format: "openai" (default), "gemini", or "vertex"
AI_PROVIDER_FORMAT=openai

# OpenAI-compatible API (default, works with third-party services)
OPENAI_API_KEY=your-api-key-here
OPENAI_API_BASE=https://api.openai.com/v1
OPENAI_TIMEOUT=300.0
OPENAI_MAX_RETRIES=2

# Google Gemini API (when AI_PROVIDER_FORMAT=gemini)
GOOGLE_API_KEY=
GOOGLE_API_BASE=

# Vertex AI (when AI_PROVIDER_FORMAT=vertex)
VERTEX_PROJECT_ID=
VERTEX_LOCATION=us-central1

# ------------------------------------------------------------------------------
# AI Model Configuration
# ------------------------------------------------------------------------------
TEXT_MODEL=gemini-3-flash-preview
IMAGE_MODEL=gemini-3-pro-image-preview
IMAGE_CAPTION_MODEL=gemini-3-flash-preview

# ------------------------------------------------------------------------------
# Concurrency Configuration
# ------------------------------------------------------------------------------
MAX_DESCRIPTION_WORKERS=5
MAX_IMAGE_WORKERS=8

# Canvas/Image Factory specific settings
CANVAS_IMAGE_MAX_CONCURRENCY=0
CANVAS_IMAGE_TIMEOUT=120.0
CANVAS_IMAGE_MAX_RETRIES=0

# ------------------------------------------------------------------------------
# MinerU Document Parsing Service (Optional)
# ------------------------------------------------------------------------------
MINERU_TOKEN=
MINERU_API_BASE=https://mineru.net

# ------------------------------------------------------------------------------
# CORS Configuration
# ------------------------------------------------------------------------------
# Comma-separated list of allowed origins, or * for all
CORS_ORIGINS=http://localhost:3000

# ------------------------------------------------------------------------------
# Default Admin Account
# ------------------------------------------------------------------------------
# Only used when no users exist in database
DEFAULT_ADMIN_USERNAME=admin
DEFAULT_ADMIN_PASSWORD=admin123

# ------------------------------------------------------------------------------
# Logging
# ------------------------------------------------------------------------------
LOG_LEVEL=INFO

# ------------------------------------------------------------------------------
# Output Language
# ------------------------------------------------------------------------------
# Options: zh (Chinese), ja (Japanese), en (English), auto
OUTPUT_LANGUAGE=zh
